<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="jung_test">


	<!-- 스크랩 최초 등록 -->
	<insert id="collect_Insert" parameterType="happy.land.people.dto.LpcollectDto">
		 INSERT INTO LPCOLLECT(COL_ID, USER_EMAIL, SKETCH_ID, COL_SCRAPE, COL_LIKE)
                SELECT '004',#{user_email}, #{sketch_id}, 'F', 'F' 
                	FROM DUAL WHERE NOT EXISTS(SELECT * FROM LPCOLLECT WHERE USER_EMAIL=#{user_email} AND SKETCH_ID =#{sketch_id})
	</insert>
	
	<!-- 스크랩 상태 가져오기 -->
	<select id="scrape_Select" resultType="java.lang.String" parameterType="happy.land.people.dto.LpcollectDto">
		SELECT COL_SCRAPE FROM LPCOLLECT WHERE USER_EMAIL=#{user_email} AND SKETCH_ID=#{sketch_id}
	</select>

	<!-- 스케치북 스크랩 수정(취소, 삭제) -->
	<update id="scrape_Update" parameterType="java.util.Map">
	UPDATE LPCOLLECT SET COL_SCRAPE=#{scrape} WHERE USER_EMAIL=#{user_email} AND SKETCH_ID=#{sketch_id}
	</update>

	<!-- 좋아요 상태 가져오기 -->
	<select id="like_Select" resultType="java.lang.String" parameterType="java.util.Map">
	SELECT COL_LIKE FROM LPCOLLECT WHERE USER_EMAIL=#{user_email} AND SKETCH_ID=#{sketch_id}
	</select>
		
	<!-- 스케치북 '좋아요' (취소, 삭제) -->   
	<update id="like_Update" parameterType="java.util.Map">	
	UPDATE LPCOLLECT SET COL_LIKE=#{like} WHERE USER_EMAIL=#{user_email} AND SKETCH_ID=#{sketch_id}
	</update>    




</mapper>